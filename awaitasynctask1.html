<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        console.log('person 1: shows ticket')
        console.log('person 2: shows ticket')

        // USING PROMISE:
        // ----------------------------------------------------------------------------
        // const promiseBringingTickets = new Promise((resolve, reject) => {
        //     setTimeout(() => {
        //         resolve('ticket')
        //     }, 3000)
        // })

        // const getPopcorn = promiseBringingTickets.then((t) => {
        //     //console.log(`person 3: shows ${t}`);
        //     console.log('h: we should go in');
        //     console.log('w: need popcorn')
        //     return new Promise((resolve, reject) => {
        //         resolve(`${t} popcorn`)
        //     })
        // });
        
        // const getCooldrink = getPopcorn.then((t) => {
        //     console.log('h: we should go in');
        //     console.log('w: need cooldrink');
        //     return new Promise((resolve, reject) => {
        //         resolve(`${t} cooldrink`)
        //     })
        // });

        // getCooldrink.then((t) => console.log(t))
        // ---------------------------------------------------------------------------------

        // USING ASYNC AWAIT:
        // const preMovie = async() => 'preMovie';

        const preMovie = async () => {
            const promiseBringingTickets = new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve('ticket')
                }, 3000)
            })

            let ticket
            try{
                ticket = await promiseBringingTickets;
            }
            catch(e) {
                ticket = 'sad face'
            }
            
            const getPopcorn = new Promise((resolve, reject) => {
                resolve(`popcorn`)
            })

            // console.log('h: we should go in');
            // console.log('w: need popcorn')

            // let popcorn = await getPopcorn;
            
            // console.log('h: we should go in');
            // console.log(`w: need butter on ${popcorn}`);

            const getButterOnPopcorn = new Promise((resolve, reject) => {
                resolve(`butter`)
            })

            // let butter = await getButterOnPopcorn;

            // console.log(`h: got ${butter} on ${popcorn}`);

            const getCooldrink = new Promise((resolve, reject) => {
                resolve(`cooldrink`)
            })

            // let cooldrink = await getCooldrink;

            // console.log(`h: also got ${cooldrink}`)

            const getCandy = new Promise((resolve, reject) => {
                resolve(`candy`)
            })

            // let candy = await getCandy;

            let [popcorn, butter, cooldrink, candy] = await Promise.all([getPopcorn, getButterOnPopcorn, getCooldrink ,getCandy])

            console.log(`${popcorn}, ${butter}, ${cooldrink}, ${candy}`)
            return ticket;
        }

        preMovie().then((t) => console.log(`person 3: shows ${t}`));

        console.log('person 4: shows ticket')
        console.log('person 5: shows ticket')
    </script>
</body>
</html>